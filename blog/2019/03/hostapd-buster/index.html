<!DOCTYPE html>
<html lang="en">
<head>

  
  <meta charset="utf-8">
  <title>ã‚¢ã‚¯ã‚»ã‚¹ãƒã‚¤ãƒ³ãƒˆ | goozenlab</title>
  <meta name="description" content="">
  <meta name="author" content="jin">
  
<meta name="viewport" content="width=device-width, initial-scale=1">








<link rel="stylesheet" href="https://unpkg.com/purecss@2.1.0/build/pure-min.css" integrity="sha384-yHIFVG6ClnONEA5yB5DJXfW2/KC173DIQrYoZMEtBvGzmf0PKiGyNEqe9N6BNDBH" crossorigin="anonymous">
<link rel="stylesheet" href="https://unpkg.com/purecss@2.1.0/build/grids-responsive-min.css"> 

<link rel="stylesheet" href="https://goozenlab.github.io/css/custom.css">


<link rel="shortcut icon" href="https://goozenlab.github.io//img/favicon.ico"  type="image/x-icon">




  

<link rel="stylesheet" href="https://goozenlab.github.io/highlight/styles/atom-one-dark.css">

<script src="https://goozenlab.github.io/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>




 
</head>
<body>

<div class="header pure-g">
    <div class="pure-u-1-24 pure-u-md-2-24"></div>
    <div class="pure-u-11-12 pure-u-md-21-24">
        <div class="desktop pure-menu pure-menu-horizontal nav-menu">
            
            <a href="https://goozenlab.github.io/" class="site-title pure-menu-heading">goozenlab</a>
            <ul class="pure-menu-list pull-right">
                
                <li class="pure-menu-item pure-menu-has-children pure-menu-allow-hover">
                    <a href="#" id="menuLink1" class="pure-menu-link">projects</a>
                    <ul class="pure-menu-children">
                        

                        <li class="pure-menu-item"><a href="https://goozenlab.github.io/computing/opensource-network-environment/"
                            class="pure-menu-link">openSource network environment</a></li>
        
                        <li class="pure-menu-item"><a href="https://goozenlab.github.io/computing/pi/home-pi/"
                                class="pure-menu-link">pi home server</a></li>
                        <li class="pure-menu-item"><a href="https://goozenlab.github.io/computing/pi/travel-pi/"
                                class="pure-menu-link">pi travel router</a></li>
                        <li class="pure-menu-item"><a href="https://goozenlab.github.io/computing/pi/music-pi/"
                                class="pure-menu-link">pi music</a></li>
                
                        <li class="pure-menu-item"><a href="https://goozenlab.github.io/computing/android-securities/"
                                class="pure-menu-link">Android Securities</a></li>
                        <li class="pure-menu-item"><a href="https://goozenlab.github.io/computing/optout-phone/"
                                class="pure-menu-link">optout phone</a></li>
                        
                        <li class="pure-menu-item"><a href="https://goozenlab.github.io/computing/nomad-stick-machine/"
                            class="pure-menu-link">nomad stick machine</a></li>

                        <li class="pure-menu-item"><a href="https://goozenlab.github.io/computing/tpt480s/"
                                 class="pure-menu-link">multi-os thinkpad t480s</a></li>
                        <li class="pure-menu-item"><a href="https://goozenlab.github.io/computing/tpt480s-hackintosh/"
                                class="pure-menu-link">make hackintosh t480s</a></li>
                        <li class="pure-menu-item"><a href="https://goozenlab.github.io/computing/ryzentosh/"
                                 class="pure-menu-link">ryzentosh itx</a></li>
                    
                        <li class="pure-menu-item"><a href="https://goozenlab.github.io/computing/ipod-here-now/"
                                class="pure-menu-link">ipod reborn</a></li>                                
                        <li class="pure-menu-item"><a href="https://goozenlab.github.io/computing/vaiop-reloaded/"
                                class="pure-menu-link">vaio-P reloaded: 2019</a></li>
                    </ul>
                </li>
                
                <li class="pure-menu-item pure-menu-has-children pure-menu-allow-hover">
                    <a href="#" id="menuLink1" class="pure-menu-link">iapps</a>
                    <ul class="pure-menu-children">
                        <li class="pure-menu-item"><a href="https://goozenlab.github.io/iapp/littlist/"
                                class="pure-menu-link">littlist</a></li>
                        <li class="pure-menu-item"><a href="https://goozenlab.github.io/iapp/sati/"
                                class="pure-menu-link">sati</a></li>
                        <li class="pure-menu-item"><a href="https://goozenlab.github.io/iapp/dandori/"
                                class="pure-menu-link">dandori</a></li>
                        <li class="pure-menu-item"><a href="https://goozenlab.github.io/iapp/ohayo/"
                                class="pure-menu-link">ohayo</a></li>
                        <li class="pure-menu-item"><a href="https://goozenlab.github.io/iapp/cosper/"
                                class="pure-menu-link">cosper</a></li>
                        <li class="pure-menu-item"><a href="https://goozenlab.github.io/iapp/doop/"
                                class="pure-menu-link">doop</a></li>
                        <li class="pure-menu-item"><a href="https://goozenlab.github.io/iapp/tapas/"
                                class="pure-menu-link">tapas</a></li>
    
                    </ul>
                </li>
                <li class="pure-menu-item">
                    <a href="https://goozenlab.github.io/tags/update/" class="pure-menu-link">update</a>
                </li>

                
                <li class="pure-menu-item pure-menu-has-children pure-menu-allow-hover">
                    <sapn class="pure-menu-link">crypto</sapn>
                    <ul class="pure-menu-children">
                        <li class="pure-menu-item">
                            <a href="https://goozenlab.github.io/crypto/crypto-news" class="pure-menu-link">news archives</a>
                        </li>
                        <li class="pure-menu-item">
                            <a href="https://goozenlab.github.io/crypto/macos-tor" class="pure-menu-link">tor on macOS</a>
                        </li>
                        <li class="pure-menu-item">
                            <a href="https://goozenlab.github.io/crypto/macos-btccore" class="pure-menu-link">btc core on macOS</a>
                        </li>
                        <li class="pure-menu-item">
                            <a href="https://goozenlab.github.io/crypto/seed" class="pure-menu-link">seed</a>
                        </li>
                        <li class="pure-menu-item">
                            <a href="https://goozenlab.github.io/crypto/wallet-hardware" class="pure-menu-link">hardware wallets</a>
                        </li>
                        <li class="pure-menu-item">
                            <a href="https://goozenlab.github.io/crypto/wallet-software" class="pure-menu-link">software wallets</a>
                        </li>
                        <li class="pure-menu-item">
                            <a href="https://goozenlab.github.io/crypto/selfhosted-node" class="pure-menu-link">self-hosted pi node</a>
                        </li>               

                        
                        <li class="pure-menu-item">
                            <a href="https://goozenlab.github.io/crypto/manage-cryptos-2022" class="pure-menu-link">managing cryptos</a>
                        </li>
                        
                        <li class="pure-menu-item">
                            <a href="https://goozenlab.github.io/crypto/crypto-friendly-countires" class="pure-menu-link">crypto friendly countries</a>
                        </li>
                        <li class="pure-menu-item">
                            <a href="https://goozenlab.github.io/crypto/living-with-cryptos/" class="pure-menu-link">living with cryptos</a>
                        </li>
                    </ul>
                </li>
                <li class="pure-menu-item">
                    <a href="https://goozenlab.github.io/about/" class="pure-menu-link">about</a>
                </li>
            </ul>
        </div>
        <div class="mobile pure-menu nav-menu">
            <a href="/" class="pure-menu-heading" id="toggle-home">goozenlab</a>
            <a href="#" id="toggle-btn">&#9776;</a>
            <ul class="pure-menu-list" id="toggle-content" style="display:none;">
                
                
                <li class="pure-menu-item">
                    <a href="https://goozenlab.github.io/categories/develop/" class="pure-menu-link">dev</a>
                </li>
                <li class="pure-menu-item">
                    <a href="https://goozenlab.github.io/categories/update/" class="pure-menu-link">update</a>
                </li>
                <li class="pure-menu-item">
                    <a href="https://goozenlab.github.io/categories/goods/" class="pure-menu-link">goods</a>
                </li>
                <li class="pure-menu-item">
                    <a href="https://goozenlab.github.io/categories/nomad/" class="pure-menu-link">nomad</a>
                </li>
                <li class="pure-menu-item">
                    <a href="https://goozenlab.github.io/about/" class="pure-menu-link">about</a>
                </li>
            </ul>
        </div>
    </div>
    <div class="pure-u-1-24 pure-u-md-1-24"></div>
</div>

<div class="pure-g">
    <div class="pure-u-1-24 pure-u-md-5-24"></div>
	<div class="pure-u-11-12 pure-u-md-14-24">
        <div class="post">
            <div class="post-title">
                <p class="footnote">
                    <time class="">2019-03-17</time>
		            
                    
                    |
                    
                    
                    tags:<a href="https://goozenlab.github.io/tags/raspberry-pi">raspberry pi</a> <a href="https://goozenlab.github.io/tags/buster">buster</a> 
                    

                    
                    categories:<a href="https://goozenlab.github.io/categories/server">server</a> 
                    

                    
                </p>
                <h1>ã‚¢ã‚¯ã‚»ã‚¹ãƒã‚¤ãƒ³ãƒˆ</h1>
            </div>
            <div class="post-content">
                <p>ãƒ«ãƒ¼ã‚¿ãƒ¼ã«ã‚¤ãƒ¼ã‚µãƒ¼ãƒãƒƒãƒˆã§ç¹‹ã’ãŸDebianã®64bitå¯¾å¿œãƒ»Busterã®ãƒ©ã‚ºãƒ™ãƒªãƒ¼ãƒ»ãƒ‘ã‚¤3Bã«ã‚¢ã‚¯ã‚»ã‚¹ãƒã‚¤ãƒ³ãƒˆã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’ã—ã¾ã—ãŸã€‚ãƒ—ãƒ­ã‚­ã‚·ãƒ¼ï¼ˆã¨Torã‚‚)ãƒ»ã‚µãƒ¼ãƒãƒ¼ã‚’å…¥ã‚Œã¦ä¸²åˆºã—ã«ã™ã‚‹ã‹ã¡ã‚‡ã£ã¨è€ƒãˆã¦ã¾ã™ã€‚</p>
<p>ã‚¢ã‚¯ã‚»ã‚¹ãƒ»ãƒã‚¤ãƒ³ãƒˆåŒ–ã™ã‚‹ç‚ºã«å¿…è¦ãªã‚½ãƒ•ãƒˆã¯ä»¥ä¸‹ã®äºŒã¤ï¼‹æœ€å¾Œã®æ–¹ã§ã‚‚ã†ä¸€ã¤ï¼ˆä»»æ„ï¼‰ã§ã™ã€‚aptã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚</p>
<pre tabindex="0"><code>pi@cashu:~ $ sudo apt install hostapd dnsmasq
</code></pre><div class="attention"><b>â€»</b> dnsmasqã¯piholeã¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ã«ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆã—ã¾ã™ã€‚dnsmasqã‚’åœæ­¢ã—ã¦ã€piholeã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã—ãŸã€‚æœ€åˆã«piholeã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠã‘ã°ã€ã“ã¡ã‚‰ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ã¯ãªã‹ã£ãŸã‹ã‚‚ã€‚</div>
<h2 id="wlan0è¨­å®š">wlan0è¨­å®š</h2>
<p>ç„¡ç·šLANã®è¨­å®šã—ã¾ã™ã€‚ã¾ãšã¯ã€ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ãªã©ã—ã£ã‹ã‚Šèªè­˜ã•ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ã€‚ï¼ˆã¡ã‚‡ã£ã¨å¿ƒé…ã ã£ãŸã€‚ï¼‰</p>
<pre tabindex="0"><code>pi@cashu:~ $ iwconfig
lo        no wireless extensions.
eth0      no wireless extensions.
wlan0     IEEE 802.11  ESSID:off/any
          Mode:Managed  Access Point: Not-Associated
          Retry short limit:7   RTS thr:off   Fragment thr:off
          Encryption key:off
          Power Management:on
docker0   no wireless extensions.
root@iska:~$
</code></pre><p>èªè­˜ã¯ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ãªã®ã§ã€è¨­å®šã‚’ã—ã¾ã™ã€‚<code>wlan0 </code>ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ ã—ã¦ç·¨é›†ã—ã¾ã™ã€‚</p>
<pre tabindex="0"><code>pi@cashu:~ $ sudo vi /etc/network/interfaces.d/wlan0 
</code></pre><p>åŸºæœ¬çš„ãªIPã‚¢ãƒ‰ãƒ¬ã‚¹ã®å‰²ã‚Šå½“ã¦ã®è¨­å®šã§ã™ãŒã€ä¸€ç‚¹ã ã‘é•ã„ãŒã‚ã‚Šã¾ã™ã€‚
hostapdã¯èµ·å‹•æ™‚ã«ç«‹ã¡ä¸Šã’ã‚‰ã‚Œã¾ã™ãŒã€è‡ªåˆ†ã®ç’°å¢ƒã§ã¯wlan0ã®èªè­˜ãŒãã®å¾Œã«ãªã£ã¦ã—ã¾ã£ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚
wlan0ãŒèµ·å‹•ã•ã‚ŒãŸå¾Œã«ã‚‚ã†ä¸€åº¦ã€hostapdèµ·å‹•ã—ã¾ã™ï¼ˆâ€»æ³¨æ„ï¼‰ã€‚ã“ã“ã®éƒ¨åˆ†ã«ãŸã©ã‚Šç€ãã¾ã§ã€ã‹ãªã‚Šæ™‚é–“ãŒã‹ã‹ã‚Šã¾ã—ãŸã‚ˆã€‚ã€‚ã€‚</p>
<pre tabindex="0"><code>auto wlan0

iface wlan0 inet static
  post-up /usr/sbin/hostapd -B /etc/hostapd/hostapd.conf # &lt;&lt;-- â€»æ³¨æ„
  address 10.0.0.10
  netmask 255.255.255.0
</code></pre><h2 id="hostapdã®è¨­å®š">hostapdã®è¨­å®š</h2>
<p>ãŠæ¬¡ã¯ã‚¢ã‚¯ã‚»ã‚¹ãƒ»ãƒã‚¤ãƒ³ãƒˆã‚’è¨­å®šã—ã¾ã™ã€‚ã“ã®éƒ¨åˆ†ã¯
<code>vi /etc/hostapd/hostapd.conf</code>ã§æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã£ã¦ä¸‹è¨˜ã‚’æ›¸ãè¾¼ã¿ã¾ã™ã€‚æœ€è¿‘ã®ï¼“Bï¼‹ã§ã¯80211aã€5Ghzã‚‚ä½¿ãˆã‚‹ã®ã§ã€ãã¡ã‚‰ã‚’ä½¿ã†å ´åˆã¯å°‘ã—å¤‰æ›´ãŒå¿…è¦ã§ã™ã€‚ä»¥ä¸‹ã®è¨­å®šã¯11g.2.4Ghzãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã™ã€‚ã‚ªãƒªã‚¸ãƒŠãƒ«ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¯ã‹ãªã‚Šãƒœãƒªãƒ¥ãƒ¼ãƒ ãŒã‚ã‚Šã¾ã™ã€‚ã€€</p>
<pre tabindex="0"><code># This is the name of the WiFi interface we configured above
interface=wlan0
driver=nl80211
# Use the 2.4GHz band
hw_mode=g
channel=6

# Enable 802.11n
ieee80211n=1

# Enable WMM
wmm_enabled=1

# Enable 40MHz channels with 20ns guard interval
ht_capab=[HT40][SHORT-GI-20][DSSS_CCK-40]

# Accept all MAC addresses
macaddr_acl=0

# Use WPA authentication
auth_algs=1

# Require clients to know the network name
ignore_broadcast_ssid=0

# WPA + Access Point
wpa=2
wpa_key_mgmt=WPA-PSK

ssid=rpi3b
wpa_passphrase=raspberry

# Use AES, instead of TKIP
rsn_pairwise=CCMP
</code></pre><p>ä¿å­˜ã—ã¦é–‰ã˜ã¾ã™ã€‚SSIDã‚„wpa_passphraseï¼ˆãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼‰ã¯ç’°å¢ƒã«åˆã‚ã›ã¦ç·¨é›†ã—ã¦ãã ã•ã„ã€‚ãã—ã¦ã€ãƒ—ãƒ­ã‚»ã‚¹ã®è¨­å®šã‚’è¡Œã„ã¾ã™ã€‚</p>
<pre tabindex="0"><code>pi@cashu:~ $ sudo vi /etc/default/hostapd
</code></pre><p>èª­ã¿è¾¼ã‚€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã—ã¾ã™ã€‚ã‚³ãƒ¡ãƒ³ãƒˆã‚’å¤–ã—ã¦èª­ã¿å–ã‚Šå…ˆã‚’æ›¸ãè¾¼ã¿ã¾ã™ã€‚</p>
<pre tabindex="0"><code>DAEMON_CONF=&#34;/etc/hostapd/hostapd.conf&#34;
</code></pre><p>ã§ã€å‹•ä½œç¢ºèªã‚’ã—ã¾ã™ã€‚ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚Œã°ãã®å†…å®¹ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¨æ€ã„ã¾ã™ã€‚å•é¡Œãªãèµ·å‹•ã—ãŸã®ã§ã€Ctl+cã§ã‚·ã‚§ãƒ«ã«æˆ»ã‚Šã¾ã™ã€‚</p>
<pre tabindex="0"><code>pi@cashu:~ $ sudo hostapd -d /etc/hostapd/hostapd.conf
</code></pre><p>èµ·å‹•æ™‚ã«å‹•ãã‚ˆã†ã«ã—ã¾ã™ã€‚</p>
<pre tabindex="0"><code>pi@cashu:~ $ sudo systemctl enable hostapd
</code></pre><p>ã“ã“ã§ã€ã¡ã‚‡ã£ã¨é›£ãŒå‡ºã¾ã™ãŒã€çµæœã‚ªãƒ¼ãƒ©ã‚¤ã¨ã„ã†ã‹ã€èµ·å‹•æ™‚ã«ç«‹ã¡ä¸Šã’ãªã„ã§ã‚‚ã„ã„ã‚ˆã†ãªæ°—ã‚‚ã—ã¾ã™ãŒã€ã€ã€å‹•ã„ã¦ã„ã‚‹ã®ã§ä¸å•ã«ã—ã¾ã™ã€‚</p>
<pre tabindex="0"><code>pi@cashu:~ $ sudo systemctl status hostapd
â— hostapd.service
   Loaded: masked (Reason: Unit hostapd.service is masked.)
   Active: inactive (dead)
root@iska:~#
</code></pre><h2 id="dnsmasq">dnsmasq</h2>
<p>æ¬¡ã¯ã€ã‚¢ã‚¯ã‚»ã‚¹ãƒã‚¤ãƒ³ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã«æ¥ãŸç«¯æœ«ã¸ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã®ã€€ãŸã‚ã®<code>dnsmasq</code>ã‚’è¨­å®šã—ã¾ã™ã€‚ã‚·ãƒ³ãƒ—ãƒ«ã«ç•ªå·ã‚’å‰²ã‚Šå½“ã¦ã‚‹ã ã‘ã®dhcpã‚µãƒ¼ãƒãƒ¼ã®ç°¡æ˜“ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã™ã€‚MACã‚¢ãƒ‰ãƒ¬ã‚¹ã¨IPã€ãƒ›ã‚¹ãƒˆåã‚’æ›¸ãè¾¼ã‚“ã è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ãˆã°ä»»æ„ã®ç•ªå·ã‚’æŒ‡å®šã®ç«¯æœ«ã«å‰²ã‚ŠæŒ¯ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚ï¼ˆä»Šå›ã¯ã—ã¦ã¾ã›ã‚“ã€‚ï¼‰</p>
<pre tabindex="0"><code># Use interface wlan0
interface=wlan0
#except-interface=eth0 

# Explicitly specify the address to listen on
listen-address=10.0.0.10

# Bind to the interface to make sure we aren&#39;t sending things elsewhere.
bind-interfaces

# Forward DNS 
server=10.10.10.60
server=1.1.1.1

# Don&#39;t forward short names
domain-needed

# Never forward addresses in the non-routed address spaces.
bogus-priv

# Assign IP addresses 
# with a 24 hour lease time
dhcp-range=10.0.0.20,255.255.255.0,24h
</code></pre><p><code>listen-address, DNSserver, dhcp-range</code>ã¯ç·¨é›†ã—ã¦ãã ã•ã„ã€‚listen-addressã¯wlan0ã§å‰²ã‚Šå½“ã¦ãŸIPç•ªå·ã¨åŒã˜ã«ã—ã¦ãã ã•ã„ã€‚</p>
<h2 id="iptables-ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰">iptables: ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰</h2>
<p>ç„¡ç·šLANã«å…¥ã£ã¦ãã‚‹é€šä¿¡ã‚’ã€æœ‰ç·šLANã«æŒ¯ã‚Šåˆ†ã‘ã¦ã‚ã’ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ç„¡ç·šLANã®é€šä¿¡ã¯ãã®ã¾ã¾æœ‰ç·šLANã«æµã‚Œã¦ã„ãã¾ã™ã®ã§ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¼çš„ã«ã¯NGã§ã™ã€‚ã¾ã‚ã€å€‹äººã§ã®ç’°å¢ƒã§ã¯å•é¡Œã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€çŠ¶æ³ã«ã‚ˆã‚Šæ…é‡ã«ã—ãŸæ–¹ãŒè‰¯ã„æ™‚ã‚‚ã‚ã‚Šã¾ã™ã®ã§ã”æ³¨æ„ã®ã»ã©ã€‚</p>
<p>ã¾ãšã¯ã€ã‚·ã‚¹ãƒ†ãƒ è¨­å®šã‚’å¤‰æ›´ã—ã¾ã™ã€‚<code>sudo sh -c &quot;echo 1 &gt; /proc/sys/net/ipv4/ip_forward&quot;</code>
ã§ä¸€ç™ºã§ã§ãã¾ã™ãŒã€<code>vi /etc/sysctl.conf</code>ã§ç›´æ¥è¨­å®šã‚’ã„ã˜ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚</p>
<p>ã§ã€å†èµ·å‹•ã—ã¾ã™ã€‚</p>
<p>ãã—ã¦ã€ãƒ‘ã‚±ãƒƒãƒˆã®æµã‚Œã‚’è¨­å®šã«è¿½åŠ ã—ã¾ã™ã€‚ä½•å‡¦ã®ã‚‚ã®ãŒä½•å‡¦ã‹ã‚‰ä½•å‡¦ã¸è¡Œãã€ã¨è¨€ã†æ„å‘³ãŒã‚ã‚Šã¾ã™ã€å¤§æ–‡å­—å°æ–‡å­—ã®é•ã„ã‚‚æ„å‘³ãŒã‚ã‚Šã¾ã™ã€‚æœ¬æ¥ãªã‚‰ã€ã“ã“ã§ãƒãƒ¼ãƒˆã®ç•ªå·ã‚„ã‚‰ãªã‚“ã‚„ã‚‰è¿½åŠ ã•ã‚Œã€å‘ªæ–‡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
<pre tabindex="0"><code>pi@cashu:~ $ sudo iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE
pi@cashu:~ $ sudo iptables -A FORWARD -i eth0 -o wlan0 -m state --state RELATED,ESTABLISHED -j ACCEPT
pi@cashu:~ $ sudo iptables -A FORWARD -i wlan0 -o eth0 -j ACCEPT
</code></pre><p><code>iptables</code>ã®è¨­å®šã¯ã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³ã™ã‚‹ã¨æ¶ˆãˆã¦ã—ã¾ã„ã¾ã™ã€‚iptablesè¨­å®šã‚’ä¿å­˜ã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚</p>
<pre tabindex="0"><code>pi@cashu:~ $ sudo apt-get install iptables-persistent
</code></pre><p>é€”ä¸­ã«ã€ipv4, ipv6ã®çŠ¶æ…‹ã‚’ä¿å­˜ã™ã‚‹ã‹ï¼Ÿã¨ã®è³ªå•ãŒã‚ã‚Šã¾ã™ã€‚â€ã¯ã„â€ã§ç¾åœ¨ã®iptablesã®è¨­å®šå†…å®¹ãŒã€/etc/iptables/rules.v4 ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚èµ·å‹•æ™‚ã«æ¯å›å‘¼ã³å‡ºã•ã‚Œã€èª­ã¿è¾¼ã¾ã‚Œã¾ã™ã€‚</p>
<p>ä»¥ä¸Šã®è¨­å®šãŒçµ‚ã‚ã£ãŸã‚‰ãƒªãƒ–ãƒ¼ãƒˆã—å®Œäº†ã§ã™ã€‚</p>
<div class=â€œhintâ€>â€»ã€€å¾Œã€…`iptables`ã‚’å¤‰æ›´ãƒ»è¿½åŠ ãªã©ã‚’ã—ãŸå ´åˆã¯ã€`/etc/iptables/rules.v4`ã«è¿½åŠ æ›¸ãè¾¼ã¿ã¾ã™ã€‚</div>
<pre tabindex="0"><code>pi@cashu:~ $ sudo iptables-save | sudo tee /etc/iptables/rules.v4
</code></pre><div class="attention"><b>â€»</b> ç„¡ç·šã®dhcpã§ä½¿ã†IPç•ªå·å‰²ã‚Šå½“ã¦ã‚’æœ‰ç·šã§ä½¿ã£ã¦ã„ã‚‹IPç•ªå·ã¨ã¡ã‚‡ã£ã¨ãƒãƒƒãƒ†ã‚£ãƒ³ã‚°ã•ã›ã¦ã—ã¾ã„ã€æœ‰ç·šLANãŒå¤–ã«å‡ºã¦ã‹ãªã„ã€ã¨ã„ã†ä¸å…·åˆãŒã‚ã‚Šã¾ã—ãŸã€‚ã¾ã£ãŸãã®å‡¡ãƒŸã‚¹ã§ã™ãŒã€ãŠæ°—ã‚’ã¤ã‘ã®ã»ã©ã€‚</div>
<p>ã¨ã€Debianã®64bitå¯¾å¿œBusterã¯å‰²ã¨å•é¡Œãªãä»Šã®æ‰€å‹•ã„ã¦ã¾ã™ã€‚å¤§ãƒãƒã‚Šã ã£ãŸã€ãƒ‰ãƒƒã‚«ãƒ¼ã‚‚èµ·å‹•ã—ã¦ã¾ã™ã€‚å‹•ä½œãŒæ©Ÿæ•ãªæ„Ÿã˜ãŒã€‚ã€‚ï¼ˆRPi0Wã¨æ¯”ã¹ãŸã‚‰å½“ãŸã‚Šå‰ã‹ã€‚ï¼‰ã‚ã¨ã¯BTãŒå‹•ã„ã¦ãã‚Œã‚Œã°ã€ã€ã€‚</p>

                

<h3>See Also</h3>
<ul>
	
	<li><a href="/blog/2019/03/pi-archlinux64-install/">ArchLinuxã‚’Raspberry Pi B3ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</a></li>
	
	<li><a href="/blog/2019/03/install-dietpi/">DietPiã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</a></li>
	
	<li><a href="/blog/2019/03/micros-speed-pie/">MicroSDã‚«ãƒ¼ãƒ‰ã®é€Ÿåº¦æ¯”è¼ƒ</a></li>
	
	<li><a href="/blog/2019/03/install-moode-rpi0w/">moOdeã‚’rPi0wã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</a></li>
	
	<li><a href="/blog/2019/03/mi-temperature-monitor/">Xiaomi æ°—æ¸©æ¹¿åº¦è¨ˆ</a></li>
	
</ul>


            </div>
            
            
                <div id="disqus_thread"></div>
<script>
    

    
    var disqus_config = function () {
    this.page.url = "https://goozenlab.github.io/blog/2019/03/hostapd-buster/";  
    this.page.identifier = "2019-03-17-hostapd-buster"; 
    };
    
    (function() { 
    var d = document, s = d.createElement('script');
    s.src = 'https://goozenlabgh.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            
            
            <div class="post-content">
                <h2>ğŸ tipping</h2>
                <p>
                    ğŸŒ· sat : <a href="https://tippin.me/@goozenlab">https://tippin.me/@goozenlab</a><br />
                    ğŸŒ» <a href="/images/bc1q0xqvzuaa6j9289jw8477hy872p0wdtrgzz9c3w.png">bitcoin</a> : bc1q0xqvzuaa6j9289jw8477hy872p0wdtrgzz9c3w<br />
                    ğŸŒº <a href="/images/0x4496E264A0B0dd9253aABBCEB1439758014ACDC5.png">eth</a> : 0x4496E264A0B0dd9253aABBCEB1439758014ACDC5
                </p>
                <span style="color:#ff2222;">ãƒ»</span><span class="footnote">If you do send a tip, Please <a href="mailto:goozenlab@icloud.com">email me</a> so that I can say thank you.</span></sppan>
            </div>
        </div>
	</div>
    <div class="pure-u-1-24 pure-u-md-5-24"></div>
</div>


<div class="footer pure-g">
    <div class="pure-u-1-24 pure-u-md-3-24"></div>
    <div class="pure-u-11-12 pure-u-md-20-24">
		<div style="margin-top:-26px; margin-left:-13px;"><img src="/images/site/footer-owl.png" alt="Owl" /></div>
        <div class="footer-content">
 		  <div class="pure-menu pure-menu-horizontal">
              <ul>







			      
                  <li class="pure-menu-heading" id="foot-name">Jin K.:</li>
                  

                  
                  <li class="pure-menu-item">
                      <a href="mailto:goozenlab@icloud.com" class="pure-menu-link">Email</a>
                  </li>
                  

                  

                  

                  

                  
                  <li class="pure-menu-item">
                      <a href="https://twitter.com/goozenlab" class="pure-menu-link">Twitter</a>
                  </li>
                  
                  
              </ul>
              <a href="#" class="pure-menu-heading pull-right" id="gototop-btn">â†‘â†‘</a>
          </div>
		  
		  <p id="foot-copyright">Copyright 2022, goozenlab; all rights reserved.</p>
		  
		</div>
      <div class="pure-u-1-24 pure-u-md-1-24"></div>
</div>


<script src="https://goozenlab.github.io/js/jquery.min.js" type="text/javascript"></script>
<script src="https://goozenlab.github.io/js/jquery.timeago.js" type="text/javascript"></script>
<script type="text/javascript">
  $(function(){
    $("time.timeago").timeago();
  })
  $("#toggle-btn").click(function(){
    $("#toggle-content").toggle();
    if($(this).html() === "â˜°") {
        $(this).html("X")
    } else {
        $(this).html("â˜°")
    }
  });
  $(window).resize(function(){
    if(window.innerWidth > 768) {
      $(".desktop").removeAttr("style");
    }
  });
</script>



</body>
</html>



