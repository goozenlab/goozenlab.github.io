<!DOCTYPE html>
<html lang="ja">
<head>
  
  <meta charset="utf-8">
  <title>Fusion drive を作る | goozenlab</title>
  <meta name="description" content="Fusion drive を作る">
  <meta name="author" content="jin">
  
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <noscript>
    <link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,600" rel="stylesheet" type="text/css">
  </noscript>
  
  
  <link rel="stylesheet" href="https://goozenlab.com/css/base-min.css">
  <link rel="stylesheet" href="https://goozenlab.com/css/menus-min.css">
  <link rel="stylesheet" href="https://goozenlab.com/css/grids-min.css">
  
  
  <link rel="stylesheet" href="https://goozenlab.com/css/grids-responsive-min.css">
  

  
  <link rel="stylesheet" href="https://goozenlab.com/css/custom.css">

  
  <script src="https://goozenlab.com/js/highlight.pack.js"></script>
  <link rel="stylesheet" href="https://goozenlab.com/css/dracula.css">
  <script>
   hljs.configure({ tabReplace: "  " });
   hljs.initHighlightingOnLoad();
  </script>

  
  <link rel="shortcut icon" href="https://goozenlab.com/img/favicon.ico" type="image/x-icon">

  
  

  
  
</head>
<body>

<div class="header pure-g">
    <div class="pure-u-1-24 pure-u-md-3-24"></div>
    <div class="pure-u-11-12 pure-u-md-18-24">
        <div class="desktop pure-menu pure-menu-horizontal nav-menu">
            
            <a href="https://goozenlab.com" class="site-title pure-menu-heading">goozenlab</a>
            <ul class="pure-menu-list pull-right">
				
                <li class="pure-menu-item">
                    <a href="https://goozenlab.com/categories/develop/" class="pure-menu-link">dev</a>
                </li>
                <li class="pure-menu-item">
                    <a href="https://goozenlab.com/categories/update/" class="pure-menu-link">update</a>
                </li>
                <li class="pure-menu-item">
                    <a href="https://goozenlab.com/categories/goods/" class="pure-menu-link">goods</a>
                </li>
                <li class="pure-menu-item">
                    <a href="https://goozenlab.com/categories/nomad/" class="pure-menu-link">nomad</a>
                </li>
                <li class="pure-menu-item">
                    <a href="https://goozenlab.com/about/" class="pure-menu-link">about</a>
                </li>
            </ul>
        </div>
        <div class="mobile pure-menu nav-menu">
            <a href="/" class="pure-menu-heading" id="toggle-home">goozenlab</a>
            <a href="#" id="toggle-btn">&#9776;</a>
            <ul class="pure-menu-list" id="toggle-content" style="display:none;">
                
				
                 <li class="pure-menu-item">
                    <a href="https://goozenlab.com/categories/develop/" class="pure-menu-link">dev</a>
                </li>
                <li class="pure-menu-item">
                    <a href="https://goozenlab.com/categories/update/" class="pure-menu-link">update</a>
                </li>
                <li class="pure-menu-item">
                    <a href="https://goozenlab.com/categories/goods/" class="pure-menu-link">goods</a>
                </li>
                <li class="pure-menu-item">
                    <a href="https://goozenlab.com/categories/nomad/" class="pure-menu-link">nomad</a>
                </li>
                <li class="pure-menu-item">
                    <a href="https://goozenlab.com/about/" class="pure-menu-link">about</a>
                </li>
            </ul>
        </div>
    </div>
    <div class="pure-u-1-24 pure-u-md-3-24"></div>
</div>

<div class="pure-g">
    <div class="pure-u-1-24 pure-u-md-5-24"></div>
	<div class="pure-u-11-12 pure-u-md-14-24">
        <div class="post">

            <div class="post-title">
                <p class="footnote">
                    <time class="">2016-03-03</time>
		            
                    
                    |
                    
                    

                    
                    categories:<a href="https://goozenlab.comcategories/mac">mac</a> 
                    

                    
                </p>
                <h1>Fusion drive を作る</h1>
            </div>

            <div class="post-content">
                

<p>MacBookProのディスク入替えついでにフュージョン化とElCapitanのクリーンインストールを行う。自分の為のメモとして書いておく。Fusion化のターミナルでの作業は簡単に書くと以下の流れになる。</p>

<ol>
<li>ディスク番号確認：diskutil list</li>
<li>フュージョンドライブ作成：diskutil cs create</li>
<li>ボリューム作成：diskutil coreStorage createVolume</li>
</ol>

<h2 id="詳細">詳細</h2>

<p>Fusion化を行うディスクの番号を <code>diskutil list</code> にて把握。そして <code>diskutil cs create &quot;Fusion Drive&quot; disk1 disk2</code> にてLogical Volume Groupを構築。</p>

<p>※この作業はMacBookProをMacBookAirに繋いで行っている為ディスク番号は disk1 と disk2 になっている。通常なら disk0 と disk1 になる。</p>

<pre><code>shingha:~ $ diskutil cs create &quot;Fusion Drive&quot; disk1 disk2
Started CoreStorage operation
Unmounting disk1
Repartitioning disk1
Unmounting disk
Creating the partition map
Rediscovering disk1
Adding disk1s2 to Logical Volume Group
Unmounting disk2
Repartitioning disk2
Unmounting disk
Creating the partition map
Rediscovering disk2
Adding disk2s2 to Logical Volume Group
Creating Core Storage Logical Volume Group
Switching disk1s2 to Core Storage
Switching disk2s2 to Core Storage
Waiting for Logical Volume Group to appear
Discovered new Logical Volume Group &quot;670F5705-EC7F-4D52-XXXX-A465FFA3EE12&quot;
Core Storage LVG UUID: 670F5705-EC7F-4D52-XXXX-A465FFA3EE12
Finished CoreStorage operation
shingha:~ $ 
</code></pre>

<p>Volumeを <code>diskutil cs createVolume &quot;new Logical Volume Group 番号&quot; jhfs+ &quot;Fusion.11&quot; 100%</code> で作成。Fusion.11がファインダーで表示される。</p>

<pre><code>shingha:~ $ diskutil cs createVolume &quot;670F5705-EC7F-4D52-XXXX-A465FFA3EE12&quot; jhfs+ &quot;Fusion.11&quot; 100%
The Core Storage Logical Volume Group UUID is 670F5705-EC7F-4D52-XXXX-A465FFA3EE12
Started CoreStorage operation
Waiting for Logical Volume to appear
Formatting file system for Logical Volume
Initialized /dev/rdisk3 as a 2 TB case-insensitive HFS Plus volume with a 139264k journal
Mounting disk
Core Storage LV UUID: E61D3EA0-4744-4B23-XXXX-533D19B9D00C
Core Storage disk: disk3
Finished CoreStorage operation
shingha:~ $
</code></pre>

<h2 id="フュージョン化の解除">フュージョン化の解除</h2>

<p>一つになったドライブの解除方法は <code>diskutil cs deleteVolume</code> というコマンドもあるが</p>

<pre><code>diskutil cs delete &quot;670F5705-EC7F-4D52-XXXX-A465FFA3EE12&quot;
</code></pre>

<p>の一発で行けると、思う・・。</p>

<h2 id="リカバリーusb-stick">リカバリーUSB Stick</h2>

<p>次いでに、リカバリーUSB Stickの作成方法は、AppStoreよりエルキャピタンのインストールアプリをダウンロード、USB Stickを初期化し（ディスクの名前はデフォルトのUntitled) 以下のコマンドで作る事ができる。Copying installer files to disk&hellip; で動きが止まり思ったより時間が掛かる。</p>

<pre><code>shingha:~ $ sudo /Applications/Install\ OS\ X\ El\ Capitan.app/Contents/Resources/createinstallmedia --volume /Volumes/Untitled/ --applicationpath /Applications/Install\ OS\ X\ El\ Capitan.app --nointeraction
Password:
Erasing Disk: 0%... 10%... 20%... 30%...100%...
Copying installer files to disk...
Copy complete.
Making disk bootable...
Copying boot files...
Copy complete.
Done.
shingha:~ $ 
</code></pre>

            </div>
            
            <div class="post-content">
            	<div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "goozenlabgh" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
           </div>
           
        </div>
	</div>
    <div class="pure-u-1-24 pure-u-md-5-24"></div>
</div>

<div class="footer pure-g">
    <div class="pure-u-1-24 pure-u-md-3-24"></div>
    <div class="pure-u-11-12 pure-u-md-20-24">
        <div class="footer-content">
		  <div class="pure-menu pure-menu-horizontal">
              <ul>
			      
                  <li class="pure-menu-heading" id="foot-name">goozenlab:</li>
                  

                  
                  <li class="pure-menu-item">
                      <a href="mailto:goozenlab@gmail.com" class="pure-menu-link">Email</a>
                  </li>
                  

                  

                  

                  

                  
                  <li class="pure-menu-item">
                      <a href="https://twitter.com/goozenlab" class="pure-menu-link">Twitter</a>
                  </li>
                  

              </ul>
              <a href="#" class="pure-menu-heading pull-right" id="gototop-btn">↑↑</a>
          </div>
		  
		  <p id="foot-copyright">Copyright (c) 2018, goozenlab; all rights reserved.</p>
		  
		</div>
	  </div>
      <div class="pure-u-1-24 pure-u-md-1-24"></div>
</div>


<script src="https://goozenlab.com/js/jquery.min.js" type="text/javascript"></script>
<script src="https://goozenlab.com/js/jquery.timeago.js" type="text/javascript"></script>
<script type="text/javascript">
  $(function(){
    $("time.timeago").timeago();
  })
  $("#toggle-btn").click(function(){
    $("#toggle-content").toggle();
    if($(this).html() === "☰") {
        $(this).html("X")
    } else {
        $(this).html("☰")
    }
  });
  $(window).resize(function(){
    if(window.innerWidth > 768) {
      $(".desktop").removeAttr("style");
    }
  });
</script>

</body>
</html>

