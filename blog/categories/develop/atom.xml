<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: develop | goozenlab]]></title>
  <link href="http://goozenlab.com/blog/categories/develop/atom.xml" rel="self"/>
  <link href="http://goozenlab.com/"/>
  <updated>2015-02-27T18:15:44+05:45</updated>
  <id>http://goozenlab.com/</id>
  <author>
    <name><![CDATA[jin]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[ニブレスプロジェクト]]></title>
    <link href="http://goozenlab.com/blog/2015/02/26/xibless-project/"/>
    <updated>2015-02-26T07:25:00+05:45</updated>
    <id>http://goozenlab.com/blog/2015/02/26/xibless-project</id>
    <content type="html"><![CDATA[<p>swiftに移行中です。折角なのでなるべく奇麗にやり直したい、ずる無しでシンプルに仕上げたい。</p>

<p>ストーリーボードにはどうも馴染めず、結局中途半端にViewのコンポーネントをコードで書き込んだりする事になりそうなので、最初から何もなし状態から始めた方が良いと、、</p>

<ul>
<li>まずは storyboard/xib 無しテーブルビューベースのプロジェクト、ListViewController (UITableViewController) がMainViewController です。</li>
</ul>


<p>```
   func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -> Bool {</p>

<pre><code>    // Override point for customization after application launch.

    self.window = UIWindow(frame: UIScreen.mainScreen().bounds)
    let navigationController = UINavigationController(rootViewController: ListViewController())

    let controller = navigationController.topViewController as ListViewController
    controller.managedObjectContext = self.managedObjectContext

    self.window!.rootViewController = navigationController
    self.window!.makeKeyAndVisible()
    return true
}
</code></pre>

<p>```</p>

<ul>
<li>お次ぎは、storyboard/xib 無しビューコントローラーベースのプロジェクト、MainViewController (UIViewController) が文字通り MainViewController です。</li>
</ul>


<p>、、が、、、、色々コンポーネントを追加していけば行くほど、アラートが上がってくる。。。（試行錯誤中）</p>

<p>```</p>

<pre><code>func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -&gt; Bool {
    // Override point for customization after application launch.

    self.window = UIWindow(frame: UIScreen.mainScreen().bounds)

    let mainViewController = MainViewController()
    mainViewController.managedObjectContext = self.managedObjectContext

    self.window!.rootViewController = mainViewController
    self.window!.makeKeyAndVisible()

    return true
}
</code></pre>

<p>```</p>

<p>割と簡単に行きましたが、こんなものまで、調べつつやってます。。。let なのか var なのか、！なのか？なのか。。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Reminder：日時の書き込み]]></title>
    <link href="http://goozenlab.com/blog/2015/02/23/reminder-duedatecomponents/"/>
    <updated>2015-02-23T06:50:00+05:45</updated>
    <id>http://goozenlab.com/blog/2015/02/23/reminder-duedatecomponents</id>
    <content type="html"><![CDATA[<p>リマインダーへの日時の書き込み</p>

<p>読み込み時には</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span>    <span class="n">event</span><span class="p">.</span><span class="n">dueDate</span> <span class="o">=</span> <span class="n">eventToRead</span><span class="p">.</span><span class="n">dueDateComponents</span><span class="p">.</span><span class="n">date</span><span class="p">;</span>
</span><span class='line'>    <span class="n">event</span><span class="p">.</span><span class="n">timeZone</span> <span class="o">=</span> <span class="n">eventToRead</span><span class="p">.</span><span class="n">dueDateComponents</span><span class="p">.</span><span class="n">timeZone</span><span class="p">;</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>と、あっさりと行くのですが、<code>.dueDateComponents.date</code> は readonly で書き込み時には日時をバラバラにしてまとめて書き込みます。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span>        <span class="n">NSCalendar</span> <span class="o">*</span><span class="n">gregorian</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSCalendar</span> <span class="n">alloc</span><span class="p">]</span>
</span><span class='line'>                                 <span class="nl">initWithCalendarIdentifier:</span><span class="n">NSGregorianCalendar</span><span class="p">];</span>
</span><span class='line'>        <span class="kt">unsigned</span> <span class="n">unitFlags</span><span class="o">=</span> <span class="n">NSYearCalendarUnit</span><span class="o">|</span><span class="n">NSMonthCalendarUnit</span> <span class="o">|</span> <span class="n">NSDayCalendarUnit</span> <span class="o">|</span>
</span><span class='line'>         <span class="n">NSHourCalendarUnit</span> <span class="o">|</span> <span class="n">NSMinuteCalendarUnit</span> <span class="o">|</span> <span class="n">NSSecondCalendarUnit</span> <span class="o">|</span><span class="n">NSTimeZoneCalendarUnit</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">NSDateComponents</span> <span class="o">*</span><span class="n">dailyComponents</span><span class="o">=</span><span class="p">[</span><span class="n">gregorian</span> <span class="nl">components:</span><span class="n">unitFlags</span> <span class="nl">fromDate:</span><span class="n">eventToExport</span><span class="p">.</span><span class="n">dueDate</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">eventToWrite</span><span class="p">.</span><span class="n">dueDateComponents</span> <span class="o">=</span> <span class="n">dailyComponents</span><span class="p">;</span>
</span><span class='line'>        <span class="n">eventToWrite</span><span class="p">.</span><span class="n">timeZone</span> <span class="o">=</span> <span class="n">eventToExport</span><span class="p">.</span><span class="n">timeZone</span><span class="p">;</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Reminderからの読込ではまる]]></title>
    <link href="http://goozenlab.com/blog/2015/02/22/reminder-completion/"/>
    <updated>2015-02-22T23:47:00+05:45</updated>
    <id>http://goozenlab.com/blog/2015/02/22/reminder-completion</id>
    <content type="html"><![CDATA[<p>ここ数日 littlist.2.6.5にReminderへの書込み・取込みの機能の追加作業をしていました。</p>

<p>見事にハマったのが、取込みの</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">fetchRemindersMatchingPredicate:</span><span class="p">(</span><span class="n">NSPredicate</span> <span class="o">&lt;</span><span class="n">em</span><span class="o">&gt;</span><span class="p">)</span><span class="nv">predicate</span> <span class="nf">completion:</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">&lt;</span><span class="n">sup</span><span class="o">&gt;</span><span class="p">)(</span><span class="n">NSArray</span><span class="o">&lt;/</span><span class="n">sup</span><span class="o">&gt;</span> <span class="o">&lt;/</span><span class="n">em</span><span class="o">&gt;</span><span class="n">reminders</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p> でのブロック処理。 完了時にリマインダーのリストが所得でき、そのリストをセーブすれば簡単なはず、、なのが、、なぜがしっかりと保存されていない。中途半端にブロックから出てきている模様。</p>

<p>いろいろと試し、ネットで探したところ、見つかりました。</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span><span class="c1">// 事前に calendar の設定等をして、</span>
</span><span class='line'>
</span><span class='line'><span class="n">__block</span> <span class="n">NSArray</span> <span class="o">*</span><span class="n">remindersToImport</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
</span><span class='line'><span class="n">__block</span> <span class="kt">BOOL</span> <span class="n">fetching</span> <span class="o">=</span> <span class="n">YES</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="n">NSPredicate</span> <span class="o">*</span><span class="n">predicate</span> <span class="o">=</span> <span class="p">[</span><span class="n">eventStore</span> <span class="nl">predicateForRemindersInCalendars:</span><span class="err">@</span><span class="p">[</span><span class="n">calendar</span><span class="p">]];</span>
</span><span class='line'><span class="p">[</span><span class="n">eventStore</span> <span class="nl">fetchRemindersMatchingPredicate:</span><span class="n">predicate</span> <span class="nl">completion:</span><span class="o">^</span><span class="p">(</span><span class="n">NSArray</span> <span class="o">*</span><span class="n">ekReminders</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">LOG_METHOD</span><span class="p">;</span>
</span><span class='line'>    <span class="n">remindersToImport</span> <span class="o">=</span> <span class="n">ekReminders</span><span class="p">;</span>
</span><span class='line'>    <span class="n">fetching</span> <span class="o">=</span> <span class="n">NO</span><span class="p">;</span>
</span><span class='line'><span class="p">}];</span>
</span><span class='line'>
</span><span class='line'><span class="k">while</span> <span class="p">(</span><span class="n">fetching</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="p">[[</span><span class="n">NSRunLoop</span> <span class="n">currentRunLoop</span><span class="p">]</span> <span class="nl">runUntilDate:</span><span class="p">[</span><span class="n">NSDate</span> <span class="nl">dateWithTimeIntervalSinceNow:</span><span class="mf">0.05</span><span class="p">]];</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// 作業がつづく</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>と、<strong>while</strong> の所で、処理が終わるまで一服させ、作業を続ける形です。（何のためのブロック処理なのか意味が分かりませんし、こういうのはバグというのでは？？）</p>
]]></content>
  </entry>
  
</feed>
